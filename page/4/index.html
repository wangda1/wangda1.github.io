<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="千淘万漉虽辛苦，吹尽黄沙始到金">
<meta property="og:type" content="website">
<meta property="og:title" content="笔记记录">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;4&#x2F;index.html">
<meta property="og:site_name" content="笔记记录">
<meta property="og:description" content="千淘万漉虽辛苦，吹尽黄沙始到金">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>笔记记录</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">笔记记录</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_blank" rel="noopener" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'Nf5_s5_h8Jo7hX6Vxqmp','2.0.0');
</script>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/08/Something/switchomega/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/08/Something/switchomega/" itemprop="url">VSCode</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-08T10:25:16+08:00">
                2020-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Something/" itemprop="url" rel="index">
                    <span itemprop="name">Something</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SwitchOmega"><a href="#SwitchOmega" class="headerlink" title="SwitchOmega"></a>SwitchOmega</h1><h2 id="tricky"><a href="#tricky" class="headerlink" title="tricky"></a>tricky</h2><p><code>swichOmega</code> 带有自动切换的功能，可以使用　auto switch　中的规则列表应用于代理服务器，其它使用默认的直接连接；</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/05/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/%E6%95%B0%E6%8D%AE%E9%9B%86%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/05/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/%E6%95%B0%E6%8D%AE%E9%9B%86%E6%89%A9%E5%B1%95/" itemprop="url">数据集扩展</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-05T14:59:00+08:00">
                2020-02-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/" itemprop="url" rel="index">
                    <span itemprop="name">文本标注</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据集扩展"><a href="#数据集扩展" class="headerlink" title="数据集扩展"></a>数据集扩展</h1><p>介绍几种扩展训练数据的思想：</p>
<ul>
<li><p>远程监督（Distant Supervision）</p>
<blockquote>
<p>远程监督将纯文本与现有知识图谱进行对齐，能够自动标注大规模训练数据；</p>
</blockquote>
<p><img src="/2020/02/05/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/%E6%95%B0%E6%8D%AE%E9%9B%86%E6%89%A9%E5%B1%95/%E8%BF%9C%E7%A8%8B%E7%9B%91%E7%9D%A3.png" alt="远程监督"></p>
</li>
<li><p>少次学习（Few-shot learning）</p>
<p>少次学习主要是针对远程监督的缺陷而设计的算法，<br><img src="/2020/02/05/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/%E6%95%B0%E6%8D%AE%E9%9B%86%E6%89%A9%E5%B1%95/%E5%B0%91%E6%AC%A1%E5%AD%A6%E4%B9%A0.png" alt="少次学习"></p>
</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://www.jiqizhixin.com/articles/2019-11-18-2" target="_blank" rel="noopener">知识图谱从哪里来：实体关系抽取的现状与未来</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/05/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/05/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8%E5%B7%A5%E5%85%B7/" itemprop="url">文本标注工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-05T12:59:00+08:00">
                2020-02-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/%E6%96%87%E6%9C%AC%E6%A0%87%E6%B3%A8/" itemprop="url" rel="index">
                    <span itemprop="name">文本标注</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="文本标注"><a href="#文本标注" class="headerlink" title="文本标注"></a>文本标注</h1><h2 id="文本标注工具"><a href="#文本标注工具" class="headerlink" title="文本标注工具"></a>文本标注工具</h2><ol>
<li><p>Prodigy</p>
<ul>
<li>Website: <a href="https://prodi.gy/docs/" target="_blank" rel="noopener">https://prodi.gy/docs/</a></li>
<li>Blog: <a href="https://explosion.ai/blog/prodigy-annotation-tool-active-learning" target="_blank" rel="noopener">https://explosion.ai/blog/prodigy-annotation-tool-active-learning</a></li>
<li>收费</li>
</ul>
</li>
<li><p>DeepDive（Mindtagger）</p>
<ul>
<li>Website: <a href="http://deepdive.stanford.edu/labeling" target="_blank" rel="noopener">http://deepdive.stanford.edu/labeling</a></li>
<li>Front-end code repo: <a href="https://github.com/HazyResearch/mindbender" target="_blank" rel="noopener">https://github.com/HazyResearch/mindbender</a></li>
</ul>
</li>
<li><p>BRAT</p>
<ul>
<li>intro: <a href="http://brat.nlplab.org/index.html" target="_blank" rel="noopener">http://brat.nlplab.org/index.html</a></li>
<li>code: <a href="https://github.com/nlplab/brat" target="_blank" rel="noopener">https://github.com/nlplab/brat</a></li>
</ul>
</li>
<li><p>IEPY</p>
<ul>
<li>code: <a href="https://github.com/machinalis/iepy" target="_blank" rel="noopener">https://github.com/machinalis/iepy</a></li>
<li>docs: <a href="http://iepy.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">http://iepy.readthedocs.io/en/latest/index.html</a></li>
</ul>
</li>
<li><p>doccano</p>
<ul>
<li>code: <a href="https://github.com/doccano/doccano" target="_blank" rel="noopener">https://github.com/doccano/doccano</a></li>
<li>特性：合作标注、语言独立性、自动标注</li>
<li>参考：<a href="https://zhuanlan.zhihu.com/p/48320901" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/48320901</a></li>
</ul>
</li>
<li><p>Chinese-Annotator</p>
<ul>
<li>code: <a href="https://github.com/deepwel/Chinese-Annotator" target="_blank" rel="noopener">https://github.com/deepwel/Chinese-Annotator</a></li>
<li>特性：标注过程背后含有智能算法（用于减少大批量的标注），将边缘数据交给人工标注 + 标注界面显而易见地友好</li>
<li>参考：<a href="https://zhuanlan.zhihu.com/p/31149817" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/31149817</a></li>
<li>很久没维护了</li>
</ul>
</li>
</ol>
<h2 id="文本标注平台"><a href="#文本标注平台" class="headerlink" title="文本标注平台"></a>文本标注平台</h2><ol>
<li>京东众智</li>
<li>百度众测</li>
<li>figure-eight</li>
</ol>
<h2 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/15/NLP/google-bert/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/15/NLP/google-bert/" itemprop="url">Google Bert</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-15T09:11:00+08:00">
                2020-01-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Google-Bert"><a href="#Google-Bert" class="headerlink" title="Google Bert"></a>Google Bert</h1><p><a href="https://github.com/google-research/bert" target="_blank" rel="noopener">google-bert-github</a> 部分代码解读</p>
<h2 id="run-classifier-py-分类-demo"><a href="#run-classifier-py-分类-demo" class="headerlink" title="run_classifier.py 分类 demo"></a><code>run_classifier.py</code> 分类 demo</h2><p>其中包含的主要的类有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class InputExample(object):</span><br><span class="line"></span><br><span class="line">class PaddingInputExample(object):</span><br><span class="line"></span><br><span class="line">class InputFeatures(object):</span><br><span class="line"></span><br><span class="line">class DataProcessor(object):</span><br><span class="line"></span><br><span class="line">class XnliProcessor(DataProcessor):</span><br><span class="line"></span><br><span class="line">class MnliProcessor(DataProcessor):</span><br><span class="line"></span><br><span class="line">class MrpcProcessor(DataProcessor):</span><br><span class="line"></span><br><span class="line">class ColaProcessor(DataProcessor):</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create_model function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_model</span><span class="params">(bert_config, is_training, input_ids, input_mask, segment_ids,</span></span></span><br><span class="line"><span class="function"><span class="params">                 labels, num_labels, use_one_hot_embeddings)</span>:</span></span><br><span class="line">  <span class="string">"""Creates a classification model."""</span></span><br><span class="line">  <span class="comment"># 首先调用 modeling.BertModel 得到 bert 模型</span></span><br><span class="line">  <span class="comment"># Bert Model 需要的输入为：1. input_ids, 2. input_mask 3. segment_ids</span></span><br><span class="line">  <span class="comment"># bert_config 直接加载下载得到的配置文件</span></span><br><span class="line">  model = modeling.BertModel(</span><br><span class="line">      config=bert_config,</span><br><span class="line">      is_training=is_training,</span><br><span class="line">      input_ids=input_ids,</span><br><span class="line">      input_mask=input_mask,</span><br><span class="line">      token_type_ids=segment_ids,</span><br><span class="line">      use_one_hot_embeddings=use_one_hot_embeddings)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># In the demo, we are doing a simple classification task on the entire</span></span><br><span class="line">  <span class="comment"># segment.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># If you want to use the token-level output, use model.get_sequence_output()</span></span><br><span class="line">  <span class="comment"># instead.</span></span><br><span class="line">  <span class="comment"># bert 的输出有两种：</span></span><br><span class="line">  <span class="comment"># toekns level: model.get_sequence_output(): [batch_size, seq_len, embeddings_size]</span></span><br><span class="line">  <span class="comment"># sentences level: model.get_pooled_output(): [batch_size, embeddings_size]</span></span><br><span class="line">  output_layer = model.get_pooled_output()</span><br><span class="line"></span><br><span class="line">  hidden_size = output_layer.shape[<span class="number">-1</span>].value</span><br><span class="line"></span><br><span class="line">  output_weights = tf.get_variable(</span><br><span class="line">      <span class="string">"output_weights"</span>, [num_labels, hidden_size],</span><br><span class="line">      initializer=tf.truncated_normal_initializer(stddev=<span class="number">0.02</span>))</span><br><span class="line"></span><br><span class="line">  output_bias = tf.get_variable(</span><br><span class="line">      <span class="string">"output_bias"</span>, [num_labels], initializer=tf.zeros_initializer())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">with</span> tf.variable_scope(<span class="string">"loss"</span>):</span><br><span class="line">    <span class="keyword">if</span> is_training:</span><br><span class="line">      <span class="comment"># I.e., 0.1 dropout</span></span><br><span class="line">      output_layer = tf.nn.dropout(output_layer, keep_prob=<span class="number">0.9</span>)</span><br><span class="line"></span><br><span class="line">    logits = tf.matmul(output_layer, output_weights, transpose_b=<span class="literal">True</span>)</span><br><span class="line">    logits = tf.nn.bias_add(logits, output_bias)</span><br><span class="line">    probabilities = tf.nn.softmax(logits, axis=<span class="number">-1</span>)</span><br><span class="line">    log_probs = tf.nn.log_softmax(logits, axis=<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">    one_hot_labels = tf.one_hot(labels, depth=num_labels, dtype=tf.float32)</span><br><span class="line"></span><br><span class="line">    per_example_loss = -tf.reduce_sum(one_hot_labels * log_probs, axis=<span class="number">-1</span>)</span><br><span class="line">    loss = tf.reduce_mean(per_example_loss)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (loss, per_example_loss, logits, probabilities)</span><br></pre></td></tr></table></figure>

<p><code>main</code> 部分</p>
<pre><code class="python"></code></pre>
<h2 id="run-squad-py-SQuAD（The-Stanford-Question-and-Answer-Datasets）-demo"><a href="#run-squad-py-SQuAD（The-Stanford-Question-and-Answer-Datasets）-demo" class="headerlink" title="run_squad.py SQuAD（The Stanford Question and Answer Datasets） demo"></a><code>run_squad.py</code> SQuAD（The Stanford Question and Answer Datasets） demo</h2><h2 id="modelling-py-bert-上游模型"><a href="#modelling-py-bert-上游模型" class="headerlink" title="modelling.py bert 上游模型"></a><code>modelling.py</code> bert 上游模型</h2><h2 id="optimization-py-优化器部分"><a href="#optimization-py-优化器部分" class="headerlink" title="optimization.py 优化器部分"></a><code>optimization.py</code> 优化器部分</h2><h2 id="run-pretraining-py-预训练部分"><a href="#run-pretraining-py-预训练部分" class="headerlink" title="run_pretraining.py 预训练部分"></a><code>run_pretraining.py</code> 预训练部分</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/yuanxiaosc/Entity-Relation-Extraction" target="_blank" rel="noopener">实体关系抽取-github:yuanxiaosc</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/14/MLDL/transformers%EF%BC%88pytorch-pretrained-bert%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/14/MLDL/transformers%EF%BC%88pytorch-pretrained-bert%EF%BC%89/" itemprop="url">Huggingface's transformers</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-14T10:25:00+08:00">
                2020-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MLDL/" itemprop="url" rel="index">
                    <span itemprop="name">MLDL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="huggingface’s-transformers（pytorch-pretrained-bert）"><a href="#huggingface’s-transformers（pytorch-pretrained-bert）" class="headerlink" title="huggingface’s transformers（pytorch-pretrained-bert）"></a>huggingface’s <code>transformers</code>（<code>pytorch-pretrained-bert</code>）</h1><h2 id="mdoel-的保存与加载"><a href="#mdoel-的保存与加载" class="headerlink" title="mdoel 的保存与加载"></a>mdoel 的保存与加载</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Save a trained model</span></span><br><span class="line">model_to_save = model.module <span class="keyword">if</span> hasattr(model, <span class="string">'module'</span>) <span class="keyword">else</span> model  <span class="comment"># Only save the model it-self</span></span><br><span class="line">output_model_file = os.path.join(args.output_dir, <span class="string">"pytorch_model.bin"</span>)</span><br><span class="line"><span class="keyword">if</span> args.do_train:</span><br><span class="line">    torch.save(model_to_save.state_dict(), output_model_file)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load tsaved model</span></span><br><span class="line">model_state_dict = torch.load(output_model_file)</span><br><span class="line">model = BertForSequenceClassification.from_pretrained(args.bert_model, state_dict=model_state_dict, num_labels=num_labels)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/14/MLDL/viterbi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/14/MLDL/viterbi/" itemprop="url">Viterbi 算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-14T10:25:00+08:00">
                2020-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MLDL/" itemprop="url" rel="index">
                    <span itemprop="name">MLDL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>Viterbi</code> 算法常用于解决<code>预测问题</code>，如：在<code>HMM</code>、<code>CRF</code>中由已知序列推出得到观测序列；是一种<code>DP</code>算法。</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>维特比算法适用于解决的问题：</p>
<p><img src="/2020/01/14/MLDL/viterbi/viterbi_pro.png" alt="viterbi"></p>
<h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><p>维特比算法的主要思想同其他求解图中的最优路径一样，不能单纯的认为某一条子路径一定时全局最优路径的一部分，因此采用<code>动态规划的思想</code>，对于经过的每一个节点都从前到后计算并保留最优路径。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://www.zhihu.com/question/20136144" target="_blank" rel="noopener">知乎-如何通俗地讲解 viterbi 算法？</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/11/NLP/Bert_tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/11/NLP/Bert_tutorial/" itemprop="url">Bert Tutorial</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-11T20:44:00+08:00">
                2020-01-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-Bert-Tutorial"><a href="#1-Bert-Tutorial" class="headerlink" title="1. Bert Tutorial"></a>1. Bert Tutorial</h1><h2 id="1-1-Bert-的输入格式"><a href="#1-1-Bert-的输入格式" class="headerlink" title="1.1 Bert 的输入格式"></a>1.1 Bert 的输入格式</h2><p>BERT requires specifically formatted inputs. For each tokenized input sentence, we need to create:</p>
<ul>
<li>input ids: a sequence of integers identifying each input token to its index number in the BERT tokenizer vocabulary</li>
<li>segment mask: (optional) a sequence of 1s and 0s used to identify whether the input is one sentence or two sentences long. For one sentence inputs, this is simply a sequence of 0s. For two sentence inputs, there is a 0 for each token of the first sentence, followed by a 1 for each token of the second sentence</li>
<li>attention mask: (optional) a sequence of 1s and 0s, with 1s for all input tokens and 0s for all padding tokens (we’ll detail this in the next paragraph)</li>
<li>labels: a single value of 1 or 0. In our task 1 means “grammatical” and 0 means “ungrammatical”</li>
</ul>
<h2 id="1-2-Bert-的参数设置"><a href="#1-2-Bert-的参数设置" class="headerlink" title="1.2 Bert 的参数设置"></a>1.2 Bert 的参数设置</h2><blockquote>
<p>For the purposes of fine-tuning, the authors recommend the following hyperparameter ranges:</p>
</blockquote>
<ul>
<li>Batch size: 16, 32</li>
<li>Learning rate (Adam): 5e-5, 3e-5, 2e-5</li>
<li>Number of epochs: 2, 3, 4</li>
</ul>
<h1 id="2-BertTokenizer-之-WordPiece-Model"><a href="#2-BertTokenizer-之-WordPiece-Model" class="headerlink" title="2. BertTokenizer 之 WordPiece Model"></a>2. BertTokenizer 之 <code>WordPiece</code> Model</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load pre-trained model tokenizer (vocabulary)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tokenizer = BertTokenizer.from_pretrained(<span class="string">'bert-base-uncased'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = <span class="string">"Here is the sentence I want embeddings for."</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>marked_text = <span class="string">"[CLS] "</span> + text + <span class="string">" [SEP]"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tokenize our sentence with the BERT tokenizer</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tokenized_text = tokenizer.tokenize(marked_text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print out the tokens.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> (tokenized_text</span><br><span class="line">[<span class="string">'[CLS]'</span>, <span class="string">'here'</span>, <span class="string">'is'</span>, <span class="string">'the'</span>, <span class="string">'sentence'</span>, <span class="string">'i'</span>, <span class="string">'want'</span>, <span class="string">'em'</span>, <span class="string">'##bed'</span>, <span class="string">'##ding'</span>, <span class="string">'##s'</span>, <span class="string">'for'</span>, <span class="string">'.'</span>, <span class="string">'[SEP]'</span>]</span><br></pre></td></tr></table></figure>

<p>使用 <code>BertTokenizer</code> 进行分词后的序列包含 <code>##</code>，这主要的原因是 bert 使用 vocabulary 词典的大小为 3000，为了在训练时能够将所有的英文文章中的单词都能得到编码，就是用了 <code>WordPiece</code>。具体：</p>
<blockquote>
<p>Why does it look this way? This is because the BERT tokenizer was created with a WordPiece model. This model greedily creates a fixed-size vocabulary of individual characters, subwords, and words that best fits our language data. Since the vocabulary limit size of our BERT tokenizer model is 30,000, the WordPiece model generated a vocabulary that contains all English characters plus the ~30,000 most common words and subwords found in the English language corpus the model is trained on. This vocabulary contains four things:</p>
<ul>
<li>Whole words</li>
<li>Subwords occuring at the front of a word or in isolation (“em” as in “embeddings” is assigned the same vector as the standalone sequence of characters “em” as in “go get em” )</li>
<li>Subwords not at the front of a word, which are preceded by ‘##’ to denote this case</li>
<li>Individual characters</li>
</ul>
<p>To tokenize a word under this model, the tokenizer first checks if the whole word is in the vocabulary. If not, it tries to break the word into the largest possible subwords contained in the vocabulary, and as a last resort will decompose the word into individual characters. Note that because of this, we can always represent a word as, at the very least, the collection of its individual characters.</p>
<p>As a result, rather than assigning out of vocabulary words to a catch-all token like ‘OOV’ or ‘UNK,’ words that are not in the vocabulary are decomposed into subword and character tokens that we can then generate embeddings for.</p>
<p>So, rather than assigning “embeddings” and every other out of vocabulary word to an overloaded unknown vocabulary token, we split it into subword tokens [‘em’, ‘##bed’, ‘##ding’, ‘##s’] that will retain some of the contextual meaning of the original word. We can even average these subword embedding vectors to generate an approximate vector for the original word. <a href="https://mccormickml.com/2019/05/14/BERT-word-embeddings-tutorial/" target="_blank" rel="noopener">详见</a></p>
</blockquote>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/google-research/bert" target="_blank" rel="noopener">google-bert-github</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/56103665" target="_blank" rel="noopener">一起读bert文本分类代码</a></li>
<li><a href="https://towardsdatascience.com/bert-for-dummies-step-by-step-tutorial-fb90890ffe03" target="_blank" rel="noopener">BERT for dummies — Step by Step Tutorial</a>，对应的 <a href="https://colab.research.google.com/drive/1ywsvwO6thOVOrfagjjfuxEf6xVRxbUNO" target="_blank" rel="noopener">Jupyter notebook</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/10/NLP/nlp-from-0-to-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/10/NLP/nlp-from-0-to-1/" itemprop="url">NLP From 0 To 1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-10T17:21:00+08:00">
                2020-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NLP-从零到一（实战入门）"><a href="#NLP-从零到一（实战入门）" class="headerlink" title="NLP 从零到一（实战入门）"></a>NLP 从零到一（实战入门）</h1><h2 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h2><h2 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h2><h2 id="3-Bert-Model"><a href="#3-Bert-Model" class="headerlink" title="3. Bert Model"></a>3. Bert Model</h2><ol>
<li>Tutorial </li>
</ol>
<ul>
<li><a href="https://towardsdatascience.com/bert-for-dummies-step-by-step-tutorial-fb90890ffe03" target="_blank" rel="noopener">BERT for dummies — Step by Step Tutorial</a>，对应的 <a href="https://colab.research.google.com/drive/1ywsvwO6thOVOrfagjjfuxEf6xVRxbUNO" target="_blank" rel="noopener">Jupyter notebook</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/06/BigDataSystem/Batch/hadoop-IO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/06/BigDataSystem/Batch/hadoop-IO/" itemprop="url">Hadoop IO 操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-06T18:55:00+08:00">
                2020-01-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BigDataSystem/" itemprop="url" rel="index">
                    <span itemprop="name">BigDataSystem</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BigDataSystem/Batch/" itemprop="url" rel="index">
                    <span itemprop="name">Batch</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hadoop-IO-的常见操作"><a href="#Hadoop-IO-的常见操作" class="headerlink" title="Hadoop IO 的常见操作"></a>Hadoop IO 的常见操作</h1><h2 id="1-一种比较common的文件打开方式"><a href="#1-一种比较common的文件打开方式" class="headerlink" title="1. 一种比较common的文件打开方式"></a>1. 一种比较common的文件打开方式</h2><p>注：这里并不使用 <code>java.io.File</code>　打开文件，因为这种方式只能打开本地文件，对于HDFS文件不支持打开；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.URI;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FSDataInputStream;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"></span><br><span class="line">StringBuffer buffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">FSDataInputStream fsr = <span class="keyword">null</span>;</span><br><span class="line">BufferedReader bufferedReader = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FileSystem fs = FileSystem.get(URI.create(txtFilePath),conf);</span><br><span class="line">fsr = fs.open(<span class="keyword">new</span> Path(txtFilePath));</span><br><span class="line">bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(fsr));</span><br><span class="line"><span class="keyword">while</span> ((lineTxt = bufferedReader.readLine()) != <span class="keyword">null</span>) ...</span><br></pre></td></tr></table></figure>

<h2 id="2-列出HDFS文件目录下的所有文件"><a href="#2-列出HDFS文件目录下的所有文件" class="headerlink" title="2. 列出HDFS文件目录下的所有文件"></a>2. 列出HDFS文件目录下的所有文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> FileSystem fs;</span><br><span class="line">fs = FileSystem.get(URI.create(args[<span class="number">0</span>]), conf);</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> ArrayList&lt;Path&gt; <span class="title">GetPaths</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException, FileNotFoundException </span>&#123;</span><br><span class="line">	<span class="comment">// 获取path路径下所有子文件夹路径</span></span><br><span class="line">	ArrayList&lt;Path&gt; paths = <span class="keyword">new</span> ArrayList&lt;Path&gt;();</span><br><span class="line"><span class="comment">//	File file = new File(path);</span></span><br><span class="line">	FileStatus file = fs.getFileStatus(<span class="keyword">new</span> Path(path));</span><br><span class="line">	<span class="comment">// 如果这个路径是文件夹</span></span><br><span class="line">	<span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">		<span class="comment">// 获取路径下的所有文件</span></span><br><span class="line"><span class="comment">//		File[] files = file.listFiles();</span></span><br><span class="line">		FileStatus[] files = fs.listStatus(file.getPath());</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;files.length; i++) &#123;</span><br><span class="line">			<span class="comment">// 如果还是文件夹</span></span><br><span class="line">			<span class="keyword">if</span> (files[i].isDirectory()) &#123;</span><br><span class="line">				<span class="comment">// 将其加入路径列表</span></span><br><span class="line">				paths.add(files[i].getPath());</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;<span class="keyword">continue</span>;&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> paths;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/06/BigDataSystem/Batch/hadoop-monitor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wanncy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="笔记记录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/06/BigDataSystem/Batch/hadoop-monitor/" itemprop="url">Hadoop 监控</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-06T10:51:00+08:00">
                2020-01-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BigDataSystem/" itemprop="url" rel="index">
                    <span itemprop="name">BigDataSystem</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BigDataSystem/Batch/" itemprop="url" rel="index">
                    <span itemprop="name">Batch</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hadoop-监控"><a href="#Hadoop-监控" class="headerlink" title="Hadoop 监控"></a>Hadoop 监控</h1><h2 id="1-网页查看集群的状态"><a href="#1-网页查看集群的状态" class="headerlink" title="1. 网页查看集群的状态"></a>1. 网页查看集群的状态</h2><h3 id="1-1-hdfs的集群状态"><a href="#1-1-hdfs的集群状态" class="headerlink" title="1.1 hdfs的集群状态"></a>1.1 <code>hdfs</code>的集群状态</h3><ul>
<li>配置： <code>hdfs-site.xml--dfs.namenode.http-address</code></li>
<li>访问地址： <code>http://namenode-ip:50070</code></li>
</ul>
<h3 id="1-2-secondary-namenode-的集群状态"><a href="#1-2-secondary-namenode-的集群状态" class="headerlink" title="1.2 secondary namenode　的集群状态"></a>1.2 <code>secondary namenode</code>　的集群状态</h3><ul>
<li>配置： <code>hdfs-site.xml--dfs.namenode.secondary.http-address</code></li>
<li>访问地址： <code>http://namenode-ip:50090</code></li>
</ul>
<h3 id="1-3-yarn的集群状态"><a href="#1-3-yarn的集群状态" class="headerlink" title="1.3 yarn的集群状态"></a>1.3 <code>yarn</code>的集群状态</h3><ul>
<li>配置： <code>yarn-site.xml--yarn.resourcemanager.webapp.address</code></li>
<li>访问地址： <code>http://resource-manager-ip:8088</code></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/">&lt;i class=&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/5/">&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="wanncy" />
            
              <p class="site-author-name" itemprop="name">wanncy</p>
              <p class="site-description motion-element" itemprop="description">千淘万漉虽辛苦，吹尽黄沙始到金</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">214</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wanncy</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
